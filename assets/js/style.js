const images_foreground = [
    {
        name: "floor",
        src: "./assets/images/foreground/floor.svg",
        alt: "floor",
        className: "floor",
        style_left: "0vh",
        style_top: "81.5vh",
        zIndex: 1,
        width: "100%",
    },

    {
        name: "wall",
        src: "./assets/images/foreground/Wall.svg",
        alt: "wall",
        className: "wall",
        style_left: "0vh",
        style_top: "0vh",
        zIndex: 1,
        width: "100%",
    },

    {
        name: "clock",
        src: "./assets/images/foreground/Clock.svg",
        alt: "clock",
        className: "clock",
        style_left: "88vh",
        style_top: "2vh",
        zIndex: 2,
        width: "11vh",
    },

    {
        name: "board",
        src: "./assets/images/foreground/Board.svg",
        alt: "board",
        className: "board",
        style_left: "56vh",
        style_top: "15vh",
        zIndex: 2,
        width: "72vh",
    },

    {
        name: "square",
        src: "./assets/images/foreground/Square_do.svg",
        alt: "square",
        className: "square",
        style_left: "65vh",
        style_top: "44vh",
        zIndex: 2,
        width: "15.5vh",
    },

    {
        name: "ads",
        src: "./assets/images/foreground/Ads.svg",
        alt: "ads",
        className: "ads",
        style_left: "135vh",
        style_top: "20vh",
        zIndex: 2,
        width: "15.5vh",
    },

    {
        name: "shelf",
        src: "./assets/images/foreground/Shelf.svg",
        alt: "shelf",
        className: "shelf",
        style_left: "10vh",
        style_top: "17vh",
        zIndex: 3,
        width: "23vh",
    },

    {
        name: "flower_on_the_shelf",
        src: "./assets/images/foreground/Flower_on_the_shelf.svg",
        alt: "flower_on_the_shelf",
        className: "flower_on_the_shelf",
        style_left: "12vh",
        style_top: "2.1vh",
        zIndex: 2,
        width: "7.5vh",
    },

    {
        name: "books_on_the_shelf",
        src: "./assets/images/foreground/Books_on_the_shelf.svg",
        alt: "books_on_the_shelf",
        className: "books_on_the_shelf",
        style_left: "21vh",
        style_top: "11vh",
        zIndex: 2,
        width: "11.5vh",
    },

    {
        name: "picture_of_the_World",
        src: "./assets/images/foreground/Picture_of_the_World.svg",
        alt: "picture_of_the_World",
        className: "picture_of_the_World",
        style_left: "9vh",
        style_top: "23vh",
        zIndex: 2,
        width: "24.8vh",
    },

    {
        name: "table_do",
        src: "./assets/images/foreground/Table_do.svg",
        alt: "table_do",
        className: "table_do",
        style_left: "3vh",
        style_top: "45vh",
        zIndex: 2,
        width: "47vh",
    },

    {
        name: "cactus",
        src: "./assets/images/foreground/Cactus.svg",
        alt: "cactus",
        className: "cactus",
        style_left: "20vh",
        style_top: "49vh",
        zIndex: 3,
        width: "5vh",
    },

    {
        name: "books_on_the_table",
        src: "./assets/images/foreground/Books_on_the_table.svg",
        alt: "books_on_the_table",
        className: "books_on_the_table",
        style_left: "36vh",
        style_top: "49.5vh",
        zIndex: 3,
        width: "10vh",
    },

    {
        name: "teacher_do",
        src: "./assets/images/foreground/Teacher_do.svg",
        alt: "teacher_do",
        className: "teacher_do",
        style_left: "27vh",
        style_top: "24vh",
        zIndex: 4,
        width: "21vh",
    },

    {
        name: "part_do one",
        src: "./assets/images/foreground/Part_do.svg",
        alt: "part_do one",
        className: "part_do one",
        style_left: "44vh",
        style_top: "70vh",
        zIndex: 5,
        width: "42vh",
    },

    {
        name: "part_do two",
        src: "./assets/images/foreground/Part_do.svg",
        alt: "part_do two",
        className: "part_do two",
        style_left: "100vh",
        style_top: "70vh",
        zIndex: 5,
        width: "42vh",
    },

    {
        name: "backpack_one",
        src: "./assets/images/foreground/Backpack_one.svg",
        alt: "backpack_one",
        className: "backpack_one",
        style_left: "34vh",
        style_top: "85vh",
        zIndex: 4,
        width: "14.5vh",
    },

    {
        name: "backpack_two",
        src: "./assets/images/foreground/Backpack_two.svg",
        alt: "backpack_two",
        className: "backpack_two",
        style_left: "135vh",
        style_top: "85vh",
        zIndex: 4,
        width: "14.5vh",
    },

    {
        name: "trashcan",
        src: "./assets/images/foreground/Trashcan.svg",
        alt: "trashcan",
        className: "trashcan",
        style_left: "137vh",
        style_top: "72vh",
        zIndex: 3,
        width: "10.5vh",
    },

    {
        name: "box_is_on_the_floor one",
        src: "./assets/images/foreground/Box_is_on_the_floor.svg",
        alt: "box_is_on_the_floor one",
        className: "box_is_on_the_floor one",
        style_left: "155vh",
        style_top: "92vh",
        zIndex: 3,
        width: "18vh",
    },

    {
        name: "box_is_on_the_floor two",
        src: "./assets/images/foreground/Box_is_on_the_floor.svg",
        alt: "box_is_on_the_floor two",
        className: "box_is_on_the_floor two",
        style_left: "158vh",
        style_top: "85.3vh",
        zIndex: 3,
        width: "18vh",
    },

    {
        name: "locker",
        src: "./assets/images/foreground/locker.svg",
        alt: "locker",
        className: "locker",
        style_left: "153vh",
        style_top: "36vh",
        zIndex: 2,
        width: "22.3vh",
    },

    {
        name: "books_in_the_locker",
        src: "./assets/images/foreground/Books_in_the_locker.svg",
        alt: "books_in_the_locker",
        className: "books_in_the_locker",
        style_left: "161vh",
        style_top: "50.4vh",
        zIndex: 2,
        width: "11vh",
    },

    {
        name: "boxes_are_in_the_locker",
        src: "./assets/images/foreground/Boxes_are_in_the_locker.svg",
        alt: "boxes_are_in_the_locker",
        className: "boxes_are_in_the_locker",
        style_left: "161vh",
        style_top: "40vh",
        zIndex: 2,
        width: "12.5vh",
    },

    {
        name: "globe",
        src: "./assets/images/foreground/Globe.svg",
        alt: "globe",
        className: "globe",
        style_left: "157vh",
        style_top: "18.5vh",
        zIndex: 2,
        width: "14.5vh",
    },
]

const images_background = [
    {
        name: "floor",
        src: "./assets/images/background/floor.svg",
        alt: "floor",
        className: "floor",
        style_left: "0vh",
        style_top: "81.5vh",
        zIndex: 1,
        width: "100%",
    },

    {
        name: "wall",
        src: "./assets/images/background/Wall.svg",
        alt: "wall",
        className: "wall",
        style_left: "0vh",
        style_top: "0vh",
        zIndex: 1,
        width: "100%",
    },

    {
        name: "interactive_screen",
        src: "./assets/images/background/Interactive_screen.svg",
        alt: "interactive_screen",
        className: "interactive_screen",
        style_left: "44vh",
        style_top: "3vh",
        zIndex: 1,
        width: "75.5vh",
    },

    {
        name: "locker",
        src: "./assets/images/background/Locker.svg",
        alt: "locker",
        className: "locker",
        style_left: "5vh",
        style_top: "40vh",
        zIndex: 1,
        width: "28vh",
    },

    {
        name: "flower_on_the_locker",
        src: "./assets/images/background/Flower_on_the_locker.svg",
        alt: "flower_on_the_locker",
        className: "flower_on_the_locker",
        style_left: "19vh",
        style_top: "26.8vh",
        zIndex: 3,
        width: "14vh",
    },

    {
        name: "globe",
        src: "./assets/images/background/Globe.svg",
        alt: "globe",
        className: "globe",
        style_left: "8vh",
        style_top: "26.1vh",
        zIndex: 2,
        width: "14vh",
    },

    {
        name: "kolya",
        src: "./assets/images/background/Kolya.svg",
        alt: "kolya",
        className: "kolya",
        style_left: "90vh",
        style_top: "55vh",
        zIndex: 2,
        width: "16.5vh",
    },

    {
        name: "sasha",
        src: "./assets/images/background/Sasha.svg",
        alt: "sasha",
        className: "sasha",
        style_left: "70vh",
        style_top: "55vh",
        zIndex: 2,
        width: "17vh",
    },

    {
        name: "olya",
        src: "./assets/images/background/Olya.svg",
        alt: "olya",
        className: "olya",
        style_left: "110vh",
        style_top: "55vh",
        zIndex: 2,
        width: "17.5vh",
    },

    {
        name: "Dasha",
        src: "./assets/images/background/Dasha.svg",
        alt: "dasha",
        className: "dasha",
        style_left: "50vh",
        style_top: "55vh",
        zIndex: 2,
        width: "16.7vh",
    },

    {
        name: "door",
        src: "./assets/images/background/Door.svg",
        alt: "door",
        className: "door",
        style_left: "140vh",
        style_top: "19vh",
        zIndex: 2,
        width: "30vh",
    },
]

const images_incorrect = [
    {
        name: "images_incorrect_one",
        src: "./assets/images/Strikethrough_task.svg",
        alt: "images_incorrect_one",
        className: "images_incorrect_one",
        style_left: "52%",
        style_top: "-0.5vh",
        zIndex: 10,
        width: "",
    },

    {
        name: "images_incorrect_two",
        src: "./assets/images/Moving_task.svg",
        alt: "images_incorrect_two",
        className: "images_incorrect_two",
        style_left: "25%",
        style_top: "-3vh",
        zIndex: 10,
        width: "8vh",
    },
]

//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
const task_one_answer = [
    "Монотонность и сухость при изложении нового материала i",
    "Однообразие методов обучения i",
    "Неуверенность в своих знаниях i",
    "Безразличное отношение i",
    "Отсутствие информации об особенностях учеников в классе i",
        //------------------
    "Бодрое самочувствие c",
    "Отличное знание материала урока c",
    "Продуманный план урока c",
    "Разнообразие методов обучения c",
    "Увлекательное изложение материала c",
]

const task_two_answer = [
    "\tОрганизационный момент, постановка цели и задачи",
    "\tАктуализация знаний",
    "\tОсновная часть: усвоение новых знаний, проверка понимания",
    "\tЗакрепление изученного материала",
    "\tДомашнее задание и рефлексия",
]

const task_three_answer = [
    {
        one: "1.55 > 0.99",
        two: "0.307 = 0.4",
        three: "0.5 > 1",
        four: "0.40 = 0.4",
        five: "2.8 2.73",
        six: "2.08 1.47",
        seven: "1.41 1.411",
        student: "Петров Сергей"
    },

    {
        one: "2 > 0.99",
        two: "0.307 < 0.4",
        three: "0.5 > 1",
        four: "0.400 = 0.4",
        five: "2.85 2.73",
        six: "2.08 1.47",
        seven: "1.37 1.41",
        student: "Баранов Егор"
    },

    {
        one: "2 > 0.99",
        two: "0.307 < 0.4",
        three: "0.5 < 1",
        four: "0.400 = 0.4",
        five: "2.85 2.73",
        six: "2.08 1.47",
        seven: "1.37 1.21",
        student: "Скварцова Оля"
    },
]

const task_four_answer = [
    {
        name_student: "Оля",
        text: "А как знания по математике пригодятся нам в жизни?",
        type: "message",
        location: "left"
    },

    {
        name_student: "Учитель",
        text: "Оля...",
        type: "message",
        location: "right"
    },

    {
        answer: ["Оля, ты мешаешь мне вести урок, дневник мне на стол!", "false", "Оля, интересный вопрос, давайте порассуждаем вместе.", "true"],
        type: "answer_options"
    },
    //-----------------------------------

    {
        name_student: "Коля",
        text: "Почему столько много сложных правил, как их запомнить?",
        type: "message",
        location: "left"
    },

    {
        name_student: "Учитель",
        text: "...",
        type: "message",
        location: "right"
    },

    {
        answer: ["Правил действительно много, но есть разные приемы, которые помогают их быстро запомнить. Я вас им обязательно научу.", "true", "Если вы не выучите правила, не сдадите экзамены и никуда не поступите!", "false"],
        type: "answer_options"
    },
    //---------------------------------------------------------

    {
        name_student: "Саша",
        text: "Есть ли исключения из этих правил?",
        type: "message",
        location: "left"
    },

    {
        name_student: "Учитель",
        text: "...",
        type: "message",
        location: "right"
    },

    {
        answer: ["Отличный вопрос, да, есть, непременно разберём такие случаи.", "true", "Ты, Петров, исключение из правил! Не отвлекай учителя во время урока!", "false"],
        type: "answer_options"
    },
]

//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
document.addEventListener("DOMContentLoaded", ()=>{
    startGameForeground();
    startGameBackground();
    giveStart()
    document.querySelector(".foreground").style.opacity = "0"
    document.querySelector(".foreground").style.zIndex = "0"
    document.querySelector(".background").style.opacity = "1"
    document.querySelector(".background").style.zIndex = "1"

    document.querySelector("img.dasha").addEventListener("click", studentsDirect)
    document.querySelector("img.sasha").addEventListener("click", studentsDirect)
    document.querySelector("img.kolya").addEventListener("click", studentsDirect)
    document.querySelector("img.olya").addEventListener("click", studentsDirect)
})

function startGameForeground(){
    images_foreground.forEach((item) => {
        const element = createItem(item)
        document.querySelector(".foreground").appendChild(element)
    });
}

function startGameBackground(){
    images_background.forEach((item) => {
        const element = createItem(item)
        document.querySelector(".background").appendChild(element)
    });
}

function createItem(item){
    const element = document.createElement("img")
    element.src = item.src
    element.alt = item.alt
    element.className = item.className
    element.style.left = item.style_left
    element.style.top = item.style_top
    element.style.zIndex = item.zIndex
    element.style.width = item.width
    return element
}

function createIncorrect(item){
    const element = document.createElement("img")
    element.src = item.src
    element.alt = item.alt
    element.className = item.className
    element.style.left = item.style_left
    element.style.top = item.style_top
    element.style.zIndex = item.zIndex
    element.style.width = item.width
    element.style.height = "auto"
    element.style.position = "absolute"
    return element
}

let time = ""
//-------------------------------------------------------------------------
//-------------------------------------------------------------------------
let task_one_answer_copy = ""

function task_one(bool){
    if (bool){
        document.querySelector(".task.one").style.zIndex = '100'
        document.querySelector(".task.one").style.opacity = '1'
        document.querySelector(".window").style.zIndex = '99'

        document.querySelector("#exit").style.zIndex = "101"
        document.querySelector("#exit").style.opacity = "1"

        document.querySelector(".arrow").style.zIndex = "0"
        document.querySelector(".arrow").style.opacity = "0"

        task_one_answer_copy =  task_one_answer.slice()
    }

    let random_string = Math.floor(Math.random() * (task_one_answer_copy.length - 1 + 1))

    if (task_one_answer_copy.length === 0){
        document.querySelector("#task_one").innerHTML = "Вы успешно справились с заданием!!!";
        document.querySelector("#task_one").className = "complete";

        time = setTimeout(()=>{exit()}, 2500)
    } else{
        let get_unswer_one = task_one_answer_copy[random_string]

        document.querySelector("#task_one").innerHTML = String(get_unswer_one.slice(0, get_unswer_one.length - 2));

        let type = get_unswer_one.slice(get_unswer_one.length-1, get_unswer_one.length)

        if (type === "c"){
            document.querySelector("#task_one").className = "correct"
        } else if(type === "i"){
            document.querySelector("#task_one").className = "incorrect"
        }

        task_one_answer_copy.splice(random_string, 1)
    }
}

document.querySelector(".column.one").addEventListener("click", taskOneUswer)
document.querySelector(".column.two").addEventListener("click", taskOneUswer)
function taskOneUswer(){
    let number_column = event.target
    if ((/column one/.test(number_column.className) === true) || (/true/.test(number_column.className) === true)){
        if (document.querySelector("#task_one").className === "correct"){
            for (let i of document.querySelectorAll(".answer_true")){
                if (i.innerHTML.length <= 6){
                    i.innerHTML = i.innerHTML.slice(0,3) + document.querySelector("#task_one").innerHTML
                    task_one(false)
                    break
                }
            }
        }else{
            console.log("Неправильно true")
        }

    }else {
        if (document.querySelector("#task_one").className === "incorrect"){
            for (let i of document.querySelectorAll(".answer_false")){
                if (i.innerHTML.length <= 6){
                    i.innerHTML = i.innerHTML.slice(0,3) + document.querySelector("#task_one").innerHTML
                    task_one(false)
                    break
                }
            }
        }else{
            console.log("Неправильно false")
        }
    }
}

//------------------------------------------------------------------------
function task_two(bool) {
    let task_two_answer_copy = ""
    document.querySelector(".task.two h3.title").innerHTML = "Расположите в правильном порядке основные этапы урока"
    if (bool){
        document.querySelector(".task.two").style.zIndex = "100"
        document.querySelector(".task.two").style.opacity = "1"
        document.querySelector(".window").style.zIndex = '99'

        document.querySelector("#exit").style.zIndex = "101"
        document.querySelector("#exit").style.opacity = "1"

        document.querySelector(".arrow").style.zIndex = "0"
        document.querySelector(".arrow").style.opacity = "0"

        task_two_answer_copy = task_two_answer.slice()
    }

    let length_task = task_two_answer_copy.length

    for (let i = 0; i < length_task; i++) {
        let task = Math.floor(Math.random() * (task_two_answer_copy.length - 1 + 1))
        document.querySelectorAll(".task_two")[i].innerHTML = String(i+1) + "." + String(task_two_answer_copy[task]);
        task_two_answer_copy.splice(task, 1)
        document.querySelectorAll(".task_two")[i].style.backgroundColor = "rgba(255, 255, 255, 0.8)"
    }
    document.querySelectorAll(".task_two").forEach((item) => {
        item.addEventListener("click", taskTwoUnswer)
    });

    the_victory()

}

function taskTwoUnswer(){
    let taskTwoUswerCh = 0
    if (event.target.status !== "active"){
        event.target.status = "active"
        event.target.style.backgroundColor = "#8CD0B7CC"
    }else {
        event.target.status = "passive"
        event.target.style.backgroundColor = "rgba(255, 255, 255, 0.8)"
    }
    for (let item of document.querySelectorAll(".task_two")){
        if ((item.status === "active") && (item.className !== event.target.className)){
            let text = item.innerHTML.slice(0, 3) + event.target.innerHTML.slice(3, event.target.innerHTML.length)
            event.target.innerHTML = event.target.innerHTML.slice(0, 3) + item.innerHTML.slice(3, item.innerHTML.length)
            item.innerHTML = text

            event.target.status = "passive"
            item.status = "passive"
            event.target.style.backgroundColor = "rgba(255, 255, 255, 0.8)"
            item.style.backgroundColor = "rgba(255, 255, 255, 0.8)"
        }
    }
    for (let i = 0; i < task_two_answer.length; i++){
        if (task_two_answer[i].slice(1, task_two_answer[i].length) === document.querySelectorAll(".task_two")[i].innerHTML.slice(3, document.querySelectorAll(".task_two")[i].innerHTML.length)){
            document.querySelectorAll(".task_two")[i].style.backgroundColor = 'rgba(63, 199, 104, 1)'
            document.querySelectorAll(".task_two")[i].removeEventListener("click", taskTwoUnswer)
        }
    }

    for (let i of document.querySelectorAll(".task_two")){
        if ('rgba(211, 189, 199, 0.8)' === i.style.backgroundColor){
            taskTwoUswerCh++
        }
    }

    if (taskTwoUswerCh === 5){
        document.querySelector(".task.two h3.title").innerHTML = "Вы успешно прошли задание!!!"

        time = setTimeout(()=>{exit()}, 2500)
    }
}

function the_victory(){
    let j = 0
    let massiv = document.querySelectorAll(".task_two")
    for (let i of massiv){
        if (task_two_answer[j].slice(1, task_two_answer[j].length) === i.innerHTML.slice(3, i.innerHTML.length)) {
            let txt = (massiv[Math.floor(Math.random() * (massiv.length))])


            while (txt.innerHTML === (i.innerHTML.slice(3, i.innerHTML.length))) {
                txt = (massiv[Math.floor(Math.random() * (massiv.length))].innerHTML)
            }
            let text = i.innerHTML
            i.innerHTML = i.innerHTML.slice(0, 3) + txt.innerHTML.slice(3, txt.length)
            txt.innerHTML = txt.innerHTML.slice(0, 3) + text.slice(3, text.length)
        }
        j++
    }
}


//------------------------------------------------------------------------

let task_three_answer_copy = ""
function task_three(bool){
    if (bool === true){
        document.querySelector(".task.three").style.opacity = "1"
        document.querySelector(".task.three").style.zIndex = "100"
        document.querySelector(".window").style.zIndex = "99"


        document.querySelector("#exit").style.zIndex = "101"
        document.querySelector("#exit").style.opacity = "1"

        task_three_answer_copy = task_three_answer.slice()

        document.querySelector(".task.three h3.title").innerHTML = "Самостоятельная работа"
        document.querySelector("#evaluation").innerHTML = ""
        document.querySelector("#evaluation").opacity = "0"

        document.querySelector(".arrow").style.zIndex = "0"
        document.querySelector(".arrow").style.opacity = "0"

        console.log("ку")
    }

    for(let i of document.querySelectorAll(".example")){
        i.unswer = "correct"
        i.name = "correct_task"
    }


    let j = 0
    let random = Math.floor(Math.random() * (task_three_answer_copy.length - 1 + 1))
    let task_three_answer_object = task_three_answer_copy[random]
    for (let i in task_three_answer_object){
        if (i === "student"){
            document.querySelector("#student").innerHTML = String(task_three_answer_object["student"])
        } else{
            let task_massiv = task_three_answer_object[i].split(' ')
                if (task_massiv.length === 2){
                    if (Number(task_massiv[0]) > Number(task_massiv[1])){
                        document.querySelectorAll(".example")[j].unswer = "correct"
                    } else{
                        document.querySelectorAll(".example")[j].addEventListener("click", incorrectUnswerTwo)
                        document.querySelectorAll(".example")[j].unswer = "incorrect"
                    }
                } else{
                    if (Number(task_massiv[0]) > Number(task_massiv[2])){
                        if (task_massiv[1] === ">"){
                        } else{
                            document.querySelectorAll(".example")[j].unswer = "incorrect"
                            document.querySelectorAll(".example")[j].addEventListener("click", incorrectUnswerOne)
                        }
                    } else if (Number(task_massiv[0]) < Number(task_massiv[2])){
                        if (task_massiv[1] === "<"){

                        } else{
                            document.querySelectorAll(".example")[j].unswer = "incorrect"
                            document.querySelectorAll(".example")[j].addEventListener("click", incorrectUnswerOne)
                        }
                    } else if (Number(task_massiv[0]) === Number(task_massiv[2])){
                        if (task_massiv[1] === "="){
                        } else{
                            document.querySelectorAll(".example")[j].unswer = "incorrect"
                            document.querySelectorAll(".example")[j].addEventListener("click", incorrectUnswerOne)
                        }
                    }
                }
            document.querySelectorAll(".example")[j].innerText = String(task_three_answer_object[i])
        }
        j++
    }

    task_three_answer_copy.splice(random, 1)
}

function incorrectUnswerOne(){
    let task_incorrect = event.target

    task_incorrect.style.position = "relative"
    task_incorrect.name= "incorrect_task"
    task_incorrect.removeEventListener("click", incorrectUnswerOne)

    task_incorrect.appendChild(createIncorrect(images_incorrect[0]))
}

function incorrectUnswerTwo(){
    let task_incorrect = event.target

    task_incorrect.style.position = "relative"
    task_incorrect.name= "incorrect_task"
    task_incorrect.removeEventListener("click", incorrectUnswerTwo)

    task_incorrect.appendChild(createIncorrect(images_incorrect[1]))
}

function task_threeCheck(){
    const check = event.target
    let count_incorrect_unswers = 0
    let count_incorrect_unswers_name = 0
    const check_unswers = document.querySelectorAll(".example")

    for (let i of check_unswers){
        if(i.unswer === "incorrect"){
            count_incorrect_unswers ++
        }
        if(i.name === "incorrect_task"){
            count_incorrect_unswers_name ++
        }
    }

    console.log(count_incorrect_unswers, count_incorrect_unswers_name)

    if (count_incorrect_unswers !== count_incorrect_unswers_name){
        teacherCountIncorrect()
    } else{
        if (/five/.test(check.className)){
            if (count_incorrect_unswers === 0){
                if (task_three_answer_copy.length !== 0){
                    check.removeEventListener("click", task_threeCheck)
                    document.querySelector("#evaluation").innerHTML = "5"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_left 2.5s ease-in-out forwards"
                    },1500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_top_left linear forwards"
                        task_three("true")
                        document.querySelector("#evaluation").innerHTML = ""
                        document.querySelector("#evaluation").style.zIndex = "0"
                        document.querySelector("#evaluation").style.opacity = "0"
                    },3500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_bottom 2.5s ease-in-out forwards"
                        check.addEventListener("click", task_threeCheck )
                    },5000)
                } else{
                    document.querySelector("#evaluation").innerHTML = "5"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"
                    document.querySelector(".task.three h3.title").innerHTML = "Вы успешно справились"

                    time = setTimeout(()=>{exit()}, 2500)
                }
            }else if (count_incorrect_unswers <= 2){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 4){
                teacherAssessment(count_incorrect_unswers)
            }else{
                teacherAssessment(count_incorrect_unswers)
            }


        } else if(/four/.test(check.className)){
            if (count_incorrect_unswers === 0){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 2){
                if (task_three_answer_copy.length !== 0){
                    check.removeEventListener("click", task_threeCheck )
                    document.querySelector("#evaluation").innerHTML = "4"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_left 2.5s ease-in-out forwards"
                    },1500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_top_left linear forwards"
                        task_three("true")
                        document.querySelector("#evaluation").innerHTML = ""
                        document.querySelector("#evaluation").style.opacity = "0"
                        document.querySelector("#evaluation").style.zIndex = "0"

                        document.querySelector("#exit").style.zIndex = "0"
                        document.querySelector("#exit").style.opacity = "0"
                    },3500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_bottom 2.5s ease-in-out forwards"
                        check.addEventListener("click", task_threeCheck )
                    },5000)
                } else{
                    document.querySelector("#evaluation").innerHTML = "4"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"
                    document.querySelector(".task.three h3.title").innerHTML = "Вы успешно справились"

                    time = setTimeout(()=>{exit()}, 2500)
                }
            }else if (count_incorrect_unswers <= 4){
                teacherAssessment(count_incorrect_unswers)
            }else{
                teacherAssessment(count_incorrect_unswers)
            }



        } else if(/three/.test(check.className)){
            if (count_incorrect_unswers === 0){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 2){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 4){
                if (task_three_answer_copy.length !== 0){
                    check.removeEventListener("click", task_threeCheck )
                    document.querySelector("#evaluation").innerHTML = "3"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_left 2.5s ease-in-out forwards"
                    },1500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_top_left linear forwards"
                        task_three("true")
                            document.querySelector("#evaluation").innerHTML = ""
                        document.querySelector("#evaluation").style.zIndex = "0"
                            document.querySelector("#evaluation").style.opacity = "0"
                    },3500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_bottom 2.5s ease-in-out forwards"
                        check.addEventListener("click", task_threeCheck )
                    },5000)
                } else{
                    document.querySelector("#evaluation").innerHTML = "3"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"
                    document.querySelector(".task.three h3.title").innerHTML = "Вы успешно справились"

                    time = setTimeout(()=>{exit()}, 2500)
                }
            }else{
                teacherAssessment(count_incorrect_unswers)
            }


        } else if(/two/.test(check.className)){
            if (count_incorrect_unswers === 0){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 2){
                teacherAssessment(count_incorrect_unswers)
            }else if (count_incorrect_unswers <= 4){
                teacherAssessment(count_incorrect_unswers)
            }else{
                if (task_three_answer_copy.length !== 0){
                    document.querySelector("#evaluation").innerHTML = "2"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_left 2.5s ease-in-out forwards"
                    },1500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_top_left linear forwards"
                        task_three("true")
                        document.querySelector("#evaluation").innerHTML = ""
                        document.querySelector("#evaluation").style.zIndex = "0"
                        document.querySelector("#evaluation").style.opacity = "0"
                    },3500)

                    setTimeout(() =>{
                        document.querySelector(".work_check_book").style.animation = "work_check_book_bottom 2.5s ease-in-out forwards"
                        check.addEventListener("click", task_threeCheck )
                    },5000)
                } else{
                    document.querySelector("#evaluation").innerHTML = "2"
                    document.querySelector("#evaluation").style.zIndex = "99"
                    document.querySelector("#evaluation").style.opacity = "1"
                    document.querySelector(".task.three h3.title").innerHTML = "Вы успешно справились"

                    time = setTimeout(()=>{exit()}, 2500)
                }
            }
        }
    }
}

//Дадим нашим кнопкам функцию
for (let i of document.querySelectorAll(".evaluation")){
    i.addEventListener("click", task_threeCheck)
}

//--------------------------------------------------------------------------------------
let task_four_answer_copy = ""

let item = 0

let interval = ""
function task_four(bool){
    if (bool){
        if (!task_four_answer_copy[item]){
            document.querySelector(".task.four").style.opacity = "1"
            document.querySelector(".task.four").style.zIndex = "100"
            document.querySelector(".window").style.zIndex = "99"

            document.querySelector("#exit").style.zIndex = "101"
            document.querySelector("#exit").style.opacity = "1"

            document.querySelector(".arrow").style.zIndex = "0"
            document.querySelector(".arrow").style.opacity = "0"

            item = 0
            interval = ""
            task_four_answer_copy = task_four_answer.slice()

            interval = setInterval(()=>{change(task_four_answer_copy, interval)}, 1000)
        } else{
            document.querySelector(".task.four").style.opacity = "1"
            document.querySelector(".task.four").style.zIndex = "100"
            document.querySelector(".window").style.zIndex = "99"

            document.querySelector("#exit").style.zIndex = "101"
            document.querySelector("#exit").style.opacity = "1"
        }
    }else {
        interval = setInterval(()=>{change(task_four_answer_copy, interval)}, 1000)
    }
}

let out = document.querySelector(".discussion")

function change(task_four_answer_copy, interval){
    if (!task_four_answer_copy[item]){
        clearInterval(interval)
        time = setTimeout(()=>{exit()}, 2500)
    } else{
        if (task_four_answer_copy[item].type === "message"){
            createMessageTaskFour(task_four_answer_copy[item])

            out.scrollTo({
                top: out.scrollHeight - out.clientHeight,
            });

        } else if(task_four_answer_copy[item].type === "answer_options"){
            createAnswerTaskFour(task_four_answer_copy[item])
            clearInterval(interval)
        }
        item++
    }
}

function createMessageTaskFour(item){
    const element = createMessage(item)
    element.appendChild(createImageMessage(item))
    element.appendChild(createTextMessage(item))
    document.querySelector(".discussion").appendChild(element)
}

function createMessage(item){
    const element = document.createElement("div")
    element.className = item.type
    element.name = item.name_student

    element.style.marginLeft = "-10vh";
    if (item.name_student === "Учитель"){
        element.style.justifyContent = "flex-end"
        element.style.marginLeft = "20vh";
        element.className += " " + item.name_student
    }

    element.style.animation = "discussion_message .8s ease-in-out forwards"

    return element
}

function createImageMessage(item){
    const element = document.createElement("img")
    element.className = item.type + "_" + item.name_student
    element.src = getImagesStudents(String(item.name_student))
    element.style.width = "10.7vh"
    if (item.name_student === "Учитель"){
        element.style.order = "1"
        element.style.left = "50vh"
        element.style.top = "2vh"
    }

    if (item.name_student === "Оля"){
        element.style.position = "relative"
        element.style.top = "3vh"
    }

    //Для Коли Реверс на левой стороне
    if ((item.location === "left") && (item.name_student === "Коля")){
        element.style.scale = "-1 1"
    }
    //Для Оли Реверс на правой стороне
    if ((item.location === "right") && (item.name_student === "Оля")){
        element.style.scale = "-1 1"
    }

    return element
}

function createTextMessage(item){
    const element = document.createElement("div")
    element.className = "block_txt"
    element.style.width = "60vh"
    element.style.height = "fit-content"
    //------STYLE BORDER
    if (item.location === "left"){
        element.style.borderRadius = "3vh 3vh 3vh 0vh"
        element.style.marginRight = "15vh"
    }else if (item.location === "right"){
        element.style.borderRadius = "3vh 3vh 0vh 3vh"
        element.style.marginLeft = "15vh"
    }
    //---------

    element.appendChild(createTwoTexth3(item))
    element.appendChild(createTwoTextP(item))
    return element
}

function createTwoTexth3(item){
    const element = document.createElement("h3")
    element.innerHTML = item.name_student + ":"
    element.style.fontFamily = "Czizh, serif"
    element.style.fontSize = "2.7vh"
    return element
}


let interval_text = ""

function createTwoTextP(item){
    const element = document.createElement("p")
    element.style.fontFamily = "Czizh, serif"
    element.style.fontSize = "2.3vh"
    element.style.marginLeft = "2vh"
    element.style.marginTop = "1vh"

    interval_text = ""
    count = 0;
    result = ""

    clearInterval(interval)
    setTimeout(()=> {
        interval_text = setInterval(() => {
            element.innerHTML = printText(item, interval_text, false)
        }, 50)
    }, 500)
    return element
}

let count = 0;
let result = '';
let txt_result = ""
function printText(text, interval_text, bool){
    if (bool){
        txt_result = text
        if (txt_result[count]){
            result += txt_result[count]
            count++
            out.scrollTo({
                top: out.scrollHeight - out.clientHeight,
            });
            return result
        }else{
            out.scrollTo({
                top: out.scrollHeight - out.clientHeight,
            });
            clearInterval(interval_answer)
            task_four()
            if (bool){
                i++
            }
            return result
        }
    } else{
        txt_result = text.text
        if (txt_result[count]){
            result += txt_result[count]
            count++
            out.scrollTo({
                top: out.scrollHeight - out.clientHeight,
            });
            return result
        }else{
            out.scrollTo({
                top: out.scrollHeight - out.clientHeight,
            });
            clearInterval(interval_text)
            interval = setInterval(()=>{change(task_four_answer_copy, interval)}, 1000)
            if (bool){
                i++
            }
            return result
        }
    }

}
function createAnswerTaskFour(item){
    document.querySelector(".answer_options").style.animation = "answer_options_top 1s ease-out forwards"

    let copy_item = item.answer.slice()
    for (let i of document.querySelectorAll(".answer")){
        i.innerHTML = String(copy_item[0])
        i.type = String(copy_item[1])
        i.addEventListener("click", AnswerTaskFour)
        copy_item.shift()
        copy_item.shift()
    }
}

let a = ""
let i = 0
let text = ""
interval_answer = ""

function AnswerTaskFour() {
    if (event.target.type === "true"){

        text= event.target.innerHTML
        a = document.querySelectorAll(".message.Учитель")

        clearInterval(interval)

        interval_text = ""
        count = 0;
        result = ""

        interval_answer = setInterval(()=>{
            a[i].querySelector(".block_txt p").innerHTML = printText(text, interval_text, true)
        }, 50)


        document.querySelector(".answer_options").style.animation = "answer_options_bottom 1s ease-out forwards"
        for (let i of document.querySelectorAll(".answer")){
            i.removeEventListener("click", AnswerTaskFour)
        }

    }else{
        teacherMessage()
    }
}

const getImagesStudents = (name) => {
    const imagesStudentTaskFour = {
        "Оля": "./assets/images/Head_Olya.svg",
        "Учитель": "./assets/images/Head_teacher.svg",
        "Коля": "./assets/images/Head_Kolya.svg",
        "Саша": "./assets/images/Head_Sasha.svg",
    };
    return imagesStudentTaskFour[name];
}

//--------------------------------------- Добавим предметам возможность запуска функций
function giveStart() {
    document.querySelector("img.square").addEventListener("click", () => {
        task_one(true)
    })

    document.querySelector("img.ads").addEventListener("click", () => {
        task_two(true)
    })

    document.querySelector("img.teacher_do").addEventListener("click", () => {
        task_three(true)
    })

    document.querySelector("img.table_do").addEventListener("click", () => {
        task_three(true)
    })

    document.querySelector("img.part_do.one").addEventListener("click", () => {
        task_four(true)
    })

    document.querySelector("img.part_do.two").addEventListener("click", () => {
        task_four(true)

    })
}

//--------------------------------------------- Кнопка выхода из заданий
function exit(){
    document.querySelector("#exit").style.zIndex = "0"
    document.querySelector("#exit").style.opacity = "0"

    document.querySelector(".arrow").style.zIndex = "100"
    document.querySelector(".arrow").style.opacity = "1"

    //------------------- #1
    if (document.querySelector(".task.one").style.opacity === "1"){
        document.querySelector(".task.one").style.opacity = "0"
        document.querySelector(".task.one").style.zIndex = "0"
        document.querySelector(".window").style.zIndex = "0"

        setTimeout(()=>{
            for (let i of document.querySelectorAll(".answer_true")){
                i.innerHTML = i.innerHTML.slice(0,2) + "..."
            }

            for (let i of document.querySelectorAll(".answer_false")){
                i.innerHTML = i.innerHTML.slice(0,2) + "..."
            }
        }, 500)
    }

    //------------------- #2
    if (document.querySelector(".task.two").style.opacity === "1"){
        document.querySelector(".task.two").style.opacity = "0"
        document.querySelector(".task.two").style.zIndex = "0"
        document.querySelector(".window").style.zIndex = "0"
    }

    //------------------- #3
    if (document.querySelector(".task.three").style.opacity === "1"){
        document.querySelector(".task.three").style.opacity = "0"
        document.querySelector(".task.three").style.zIndex = "0"
        document.querySelector(".window").style.zIndex = "0"
    }

    //------------------- #4
    if (document.querySelector(".task.four").style.opacity === "1") {
        document.querySelector(".task.four").style.opacity = "0"
        document.querySelector(".task.four").style.zIndex = "0"
        document.querySelector(".window").style.zIndex = "0"
        clearInterval(interval)
    }

    //---------------
    clearTimeout(time)
}

//------------------------------------------ Вывод сообщения от учителя (задание 3)
function teacherCountIncorrect(){
    document.querySelector("#teacher_count_incorrect").innerHTML = "Кажется, ещё не все ошибки найдены."
    document.querySelector("#teacher_count_incorrect").style.opacity = "1"
    for (let i of document.querySelectorAll(".evaluation")){
        i.removeEventListener("click", task_threeCheck)
    }

    setTimeout(()=>{document.querySelector("#teacher_count_incorrect").style.opacity = "0"}, 3500)

    setTimeout(()=>{
        document.querySelector("#teacher_count_incorrect").innerHTML = ""

        for (let i of document.querySelectorAll(".evaluation")){
            i.addEventListener("click",  task_threeCheck)
        }}, 4500)
}

function teacherAssessment(count_incorrect){
    if (count_incorrect === 0){
        document.querySelector("#teacher_count_incorrect").innerHTML = "В работе нет ошибок, рекомендуется поставить оценку отлично"
    }else if(count_incorrect <= 2){
        document.querySelector("#teacher_count_incorrect").innerHTML = "Сделано " + String(count_incorrect) + " ошибки, рекомендуется поставить оценку хорошо"
    }else if(count_incorrect <= 4){
        document.querySelector("#teacher_count_incorrect").innerHTML = "Сделано " + String(count_incorrect) + " ошибки, рекомендуется поставить оценку удовлетворительно"
    }else{
        document.querySelector("#teacher_count_incorrect").innerHTML = "Сделано много ошибок, рекомендуется поставить оценку неудовлетворительно"
    }

    document.querySelector("#teacher_count_incorrect").style.opacity = "1"
    for (let i of document.querySelectorAll(".evaluation")){
        i.removeEventListener("click", task_threeCheck)
    }

    setTimeout(()=>{document.querySelector("#teacher_count_incorrect").style.opacity = "0"}, 3500)

    setTimeout(()=>{
        document.querySelector("#teacher_count_incorrect").innerHTML = ""

        for (let i of document.querySelectorAll(".evaluation")){
            i.addEventListener("click",  task_threeCheck)
        }}, 4500)
}

function teacherMessage(){
    document.querySelector("#teacher_message").innerHTML = "Попробуйте другой вариант ответа. Учитель не должен грубить своим ученикам."
    document.querySelector("#teacher_message").style.opacity = "1"

    for (let i of document.querySelectorAll(".answer")){
        i.removeEventListener("click", AnswerTaskFour)
    }

    setTimeout(()=>{document.querySelector("#teacher_message").style.opacity = "0"}, 3500)

    setTimeout(()=>{
        document.querySelector("#teacher_message").innerHTML = ""

        for (let i of document.querySelectorAll(".answer")){
            i.addEventListener("click",  AnswerTaskFour)
        }}, 4500)
}

//------------------------------------------- Сделаем переход между сторонами

function arrowForegroundBackground(){
    if (document.querySelector(".foreground").style.opacity === "0"){
        document.querySelector(".foreground").style.opacity = "1"
        document.querySelector(".foreground").style.zIndex = "1"
        document.querySelector(".background").style.opacity = "0"
        document.querySelector(".background").style.zIndex = "0"
    } else{
        document.querySelector(".foreground").style.opacity = "0"
        document.querySelector(".foreground").style.zIndex = "0"
        document.querySelector(".background").style.opacity = "1"
        document.querySelector(".background").style.zIndex = "1"
    }

    document.querySelector("#message_student").style.opacity = "0"
    document.querySelector("#message_student").style.zIndex = "0"
}

//------------------------------------- Объяснить куда потыкать

function studentsDirect(){
    clearTimeout(time)
    let student = event.target

    document.querySelector("#message_student").style.opacity = "1"
    document.querySelector("#message_student").style.zIndex = "100"

    if (student.className === "kolya"){
        document.querySelector("#message_student").innerHTML = "Тема сегодняшнего урока: что способствует успешному проведению занятия? Мне кажется, что учитель что-то вырисовывала КРАСНЫМ УГОЛЬНИКОМ..."
        document.querySelector("#message_student").style.left = '80vh'

    }else if (student.className === "olya"){
        document.querySelector("#message_student").innerHTML = "Как думаете, учитель ещё не проверил наши самостоятельные работы? Если нет, то как только СЯДЕТ ЗА СТОЛ, похоже начнёт их проверять..."
        document.querySelector("#message_student").style.left = '105vh'

    }else if (student.className === "dasha"){
        document.querySelector("#message_student").innerHTML = "Как думаете, на какие основные этапы можно разбить урок? Мне кажется, что на КРАСНОЙ ВЫВЕСКЕ их можно увидеть."
        document.querySelector("#message_student").style.left = '30vh'

    }else if (student.className === "sasha"){
        document.querySelector("#message_student").innerHTML = "Не забудьте задать преподавателю несколько вопросов, когда мы сядем за ПАРТЫ."
        document.querySelector("#message_student").style.left = '55vh'

    }

    time = setTimeout(()=>{
        document.querySelector("#message_student").style.opacity = "0"
        document.querySelector("#message_student").style.zIndex = "0"
    }, 7000)
}
